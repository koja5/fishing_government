"use strict";(self.webpackChunkvuexy=self.webpackChunkvuexy||[]).push([[289],{5289:(S,l,a)=>{a.r(l),a.d(l,{SettingsModule:()=>_});var g=a(6895),m=a(1760),C=a(5861),t=a(4650),d=a(3662),r=a(7296);let v=(()=>{class n{constructor(e){this._modalService=e,this.confirmed=!1}confirmAction(){this.confirmed=!0,this._modalService.dismissAll()}cancelAction(){}static#t=this.\u0275fac=function(s){return new(s||n)(t.Y36(d.FF))};static#s=this.\u0275cmp=t.Xpm({type:n,selectors:[["app-discard-changes-template"]],decls:17,vars:12,consts:[[1,"modal-header"],["id","myModalLabel160",1,"modal-title"],["type","button","aria-label","Close",1,"close"],["aria-hidden","true"],["tabindex","0","ngbAutofocus","",1,"modal-body"],[1,"modal-footer"],["type","button","rippleEffect","",1,"btn","btn-danger",3,"click"],["type","button","rippleEffect","",1,"btn","btn-default",3,"click"]],template:function(s,o){1&s&&(t.TgZ(0,"div",0)(1,"h5",1),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"button",2)(5,"span",3),t._uU(6,"\xd7"),t.qZA()()(),t.TgZ(7,"div",4),t._uU(8),t.ALo(9,"translate"),t.qZA(),t.TgZ(10,"div",5)(11,"button",6),t.NdJ("click",function(){return o.confirmAction()}),t._uU(12),t.ALo(13,"translate"),t.qZA(),t.TgZ(14,"button",7),t.NdJ("click",function(){return o.cancelAction()}),t._uU(15),t.ALo(16,"translate"),t.qZA()()),2&s&&(t.xp6(2),t.Oqu(t.lcZ(3,4,"general.discardChangesTitle")),t.xp6(6),t.hij(" ",t.lcZ(9,6,"general.discardChangesText"),"\n"),t.xp6(4),t.hij(" ",t.lcZ(13,8,"general.discardChangesConfirm")," "),t.xp6(3),t.hij(" ",t.lcZ(16,10,"general.discardChangesCancel")," "))},dependencies:[r.X$]})}return n})(),u=(()=>{class n{constructor(e,s){this._modalService=e,this._translate=s}checkConfirmation(){var e=this;return(0,C.Z)(function*(){const s=e._modalService.open(v,{size:"lg"});return s.componentInstance.confirmMessage="You have unsaved changes. Are you sure to lose changes?",s.result.then(i=>{console.log(i)}),yield s.dismissed.toPromise(),console.log(s.componentInstance.confirmed),s.componentInstance.confirmed})()}canDeactivate(e,s,o,i){if(e.unsavedChanges())return confirm(this._translate.instant("general.discardChangesText"))}static#t=this.\u0275fac=function(s){return new(s||n)(t.LFG(d.FF),t.LFG(r.sK))};static#s=this.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var f=a(9992),h=a(7947),p=a(3066);const y=["form"];let w=(()=>{class n{constructor(e,s){this._service=e,this._toastr=s,this.path="forms/general/settings",this.file="profile.json"}unsavedChanges(){return this.form.unsavedChanges()}submit(e){"submit"!=e.type&&this._service.callPostMethod("api/saveProfile",e).subscribe(s=>{s?this._toastr.showSuccess():this._toastr.showError()})}static#t=this.\u0275fac=function(s){return new(s||n)(t.Y36(f.f),t.Y36(h.l))};static#s=this.\u0275cmp=t.Xpm({type:n,selectors:[["app-profile"]],viewQuery:function(s,o){if(1&s&&t.Gf(y,5),2&s){let i;t.iGM(i=t.CRH())&&(o.form=i.first)}},decls:2,vars:2,consts:[[3,"path","file","submit"],["form",""]],template:function(s,o){1&s&&(t.TgZ(0,"app-dynamic-forms",0,1),t.NdJ("submit",function(c){return o.submit(c)}),t.qZA()),2&s&&t.Q6J("path",o.path)("file",o.file)},dependencies:[p.b]})}return n})();const P=["form"];let b=(()=>{class n{constructor(e,s,o){this._service=e,this._toastr=s,this._translate=o,this.path="forms/general/settings",this.file="change-password.json"}unsavedChanges(){return this.form.unsavedChanges()}resetPassword(e){console.log(e),e.oldPassword===e.newPassword?this._toastr.showWarningCustom(this._translate.instant("resetPassword.oldAndNewPasswordCannotBeSame")):e.newPassword!==e.repeatNewPassword?this._toastr.showWarningCustom(this._translate.instant("resetPassword.passwordsNeedToBeSame")):this._service.callPostMethod("/api/changePassword",e).subscribe(s=>{s?this._toastr.showSuccessCustom(this._translate.instant("resetPassword.successfulyChangedPassword")):this._toastr.showWarningCustom(this._translate.instant("resetPassword.oldPasswordIsWrong"))})}static#t=this.\u0275fac=function(s){return new(s||n)(t.Y36(f.f),t.Y36(h.l),t.Y36(r.sK))};static#s=this.\u0275cmp=t.Xpm({type:n,selectors:[["app-change-password"]],viewQuery:function(s,o){if(1&s&&t.Gf(P,5),2&s){let i;t.iGM(i=t.CRH())&&(o.form=i.first)}},decls:2,vars:2,consts:[[3,"path","file","submit"],["form",""]],template:function(s,o){1&s&&(t.TgZ(0,"app-dynamic-forms",0,1),t.NdJ("submit",function(c){return o.resetPassword(c)}),t.qZA()),2&s&&t.Q6J("path",o.path)("file",o.file)},dependencies:[p.b]})}return n})();var T=a(2572),A=a(3640);const Z=[{path:"profile",component:w,canDeactivate:[u]},{path:"change-password",component:b,canDeactivate:[u]}];let _=(()=>{class n{static#t=this.\u0275fac=function(s){return new(s||n)};static#s=this.\u0275mod=t.oAB({type:n});static#e=this.\u0275inj=t.cJS({imports:[g.ez,m.Bz.forChild(Z),T.w,A.Z,m.Bz]})}return n})()}}]);